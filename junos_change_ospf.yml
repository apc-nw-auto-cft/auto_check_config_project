---
- name: "change ospf route"
  hosts: junos
  gather_facts: false
  tasks:
    - name: "before route ospf"
      junipernetworks.junos.junos_command:
        commands: "show route protocol ospf"
      register: res_show
      tags:
        - check_route

    - name: "debug res_show"
      ansible.builtin.debug:
        var: res_show

    - name: "interface disable"
      junipernetworks.junos.junos_config:
        lines:
        - set interfaces ge-0/0/1 disable

    - name: "change ospf metric"
      junipernetworks.junos.junos_config:
        lines:
        - set protocols ospf area 0.0.0.0 interface ge-0/0/0.0 metric 150
      when: inventory_hostname in ['VMX01','VMX02']

    - name: "after route ospf"
      junipernetworks.junos.junos_command:
        commands: "show route protocol ospf"
      register: res_show

    - name: "debug res_show"
      ansible.builtin.debug:
        var: res_show
